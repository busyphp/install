<extend name="install/layout"/>
<block name="content">
    <div class="panel panel-default">
        <div class="panel-heading">服务器信息</div>
        <table class="table table-striped">
            <tr>
                <th style="width:150px;">参数</th>
                <th>值</th>
                <th></th>
            </tr>
            <tr class="{$ret.server.os.class|default=''}">
                <td>服务器操作系统</td>
                <td>{$ret.server.os.value|default=''}</td>
                <td>{$ret.server.os.remark|default=''}</td>
            </tr>
            <tr class="{$ret.server.sapi.class|default=''}">
                <td>Web服务器环境</td>
                <td>{$ret.server.sapi.value|default=''}</td>
                <td>{$ret.server.sapi.remark|default=''}</td>
            </tr>
            <tr class="{$ret.server.php.class|default=''}">
                <td>PHP版本</td>
                <td>{$ret.server.php.value|default=''}</td>
                <td>{$ret.server.php.remark|default=''}</td>
            </tr>
            <tr class="{$ret.server.upload.class|default=''}">
                <td>上传限制</td>
                <td>{$ret.server.upload.value|default=''}</td>
                <td>{$ret.server.upload.remark|default=''}</td>
            </tr>
        </table>
    </div>

    <div class="alert alert-info">PHP环境要求必须满足下列所有条件，否则系统或系统部份功能将无法使用。</div>
    <div class="panel panel-default">
        <div class="panel-heading">PHP环境要求</div>
        <table class="table table-striped table-bordered">
            <tr>
                <th style="width:150px;">选项</th>
                <th style="width:250px;">要求</th>
                <th style="width:50px;">状态</th>
                <th>说明及帮助</th>
            </tr>
            <tr class="{$ret.php.version.class|default=''}">
                <td>PHP版本</td>
                <td>大于等于8.0.0</td>
                <td>{$ret.php.version.value|default=''}</td>
                <td>{$ret.php.version.remark|default=''}</td>
            </tr>
            <tr class="{$ret.php.pdo.class|default=''}">
                <td>MySQL</td>
                <td>支持(建议支持PDO)</td>
                <td>{$ret.php.mysql.value|default=''}</td>
                <td rowspan="2">{$ret.php.pdo.remark|default=''}</td>
            </tr>
            <tr class="{$ret.php.pdo.class|default=''}">
                <td>PDO_MYSQL</td>
                <td>支持(强烈建议支持)</td>
                <td>{$ret.php.pdo.value|default=''}</td>
            </tr>
            <tr class="{$ret.php.curl.class|default=''}">
                <td>allow_url_fopen</td>
                <td>支持(建议支持cURL)</td>
                <td>{$ret.php.fopen.value|default=''}</td>
                <td rowspan="2">{$ret.php.curl.remark|default=''}</td>
            </tr>
            <tr class="{$ret.php.curl.class|default=''}">
                <td>cURL</td>
                <td>支持(强烈建议支持)</td>
                <td>{$ret.php.curl.value|default=''}</td>
            </tr>
            <tr class="{$ret.php.gd.class|default=''}">
                <td>GD2</td>
                <td>支持</td>
                <td>{$ret.php.gd.value|default=''}</td>
                <td>{$ret.php.gd.remark|default=''}</td>
            </tr>
            <tr class="{$ret.php.openssl.class|default=''}">
                <td>openssl</td>
                <td>支持</td>
                <td>{$ret.php.openssl.value|default=''}</td>
                <td>{$ret.php.openssl.remark|default=''}</td>
            </tr>
            <tr class="{$ret.php.session.class|default=''}">
                <td>session.auto_start</td>
                <td>关闭</td>
                <td>{$ret.php.session.value|default=''}</td>
                <td>{$ret.php.session.remark|default=''}</td>
            </tr>
        </table>
    </div>

    <div class="alert alert-info">系统要求BusyPHP开源框架的部分目录必须可写, 才能使用BusyPHP开源框架的所有功能。</div>
    <div class="panel panel-default">
        <div class="panel-heading">目录权限监测</div>
        <table class="table table-striped">
            <tr>
                <th style="width:150px;">目录</th>
                <th style="width:250px;">要求</th>
                <th style="width:50px;">状态</th>
                <th>说明及帮助</th>
            </tr>
            <tr class="{$ret.write.root.class|default=''}">
                <td>/</td>
                <td>public/uploads 目录可写</td>
                <td>{$ret.write.root.value|default=''}</td>
                <td>{$ret.write.root.remark|default=''}</td>
            </tr>
            <tr class="{$ret.write.install.class|default=''}">
                <td>/</td>
                <td>vendor 目录可写</td>
                <td>{$ret.write.install.value|default=''}</td>
                <td>{$ret.write.install.remark|default=''}</td>
            </tr>
            <tr class="{$ret.write.data.class|default=''}">
                <td>/</td>
                <td>runtime 目录可写</td>
                <td>{$ret.write.data.value|default=''}</td>
                <td>{$ret.write.data.remark|default=''}</td>
            </tr>
            <tr class="{$ret.write.database.class|default=''}">
                <td>/</td>
                <td>.env 文件可写</td>
                <td>{$ret.write.database.value|default=''}</td>
                <td>{$ret.write.database.remark|default=''}</td>
            </tr>
        </table>
    </div>
    <form class="form-inline" role="form" action="{:url($url_prefix.'db')}" method="post">
        <ul class="pager">
            <li class="previous">
                <a href="javascript:history.back()">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    返回
                </a>
            </li>

            <eq name="ret.continue" value="1">
                <li class="previous">
                    <a href="javascript:void(0)" onclick="$('form')[0].submit();">
                        继续
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </a>
                </li>
                <else/>
                <li class="previous disabled"><a href="javascript:;">请先解决环境问题后继续</a></li>
            </eq>
        </ul>
    </form>
</block>